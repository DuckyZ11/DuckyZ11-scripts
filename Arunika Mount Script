local player = game.Players.LocalPlayer
local autoWarpEnabled = false

local locations = {
    {type = "part", name = "Checkpoint1", label = "Camp 1"},
    {type = "part", name = "Checkpoint2", label = "Camp 2"},
    {type = "part", name = "Checkpoint3", label = "Camp 3"},
    {type = "part", name = "Checkpoint4", label = "Camp 4"},
    {type = "part", name = "Checkpoint5", label = "Camp 5"},
    {type = "pos", pos = Vector3.new(263, 326, 698), label = "Top"},
}

local function warpTo(location)
    local character = player.Character or player.CharacterAdded:Wait()
    local hrp = character:WaitForChild("HumanoidRootPart")

    if location.type == "part" then
        local checkpoint = workspace.Checkpoints:FindFirstChild(location.name)
        if checkpoint and checkpoint:IsA("BasePart") then
            hrp.CFrame = checkpoint.CFrame
        else
            warn("ไม่พบ " .. location.label)
        end
    elseif location.type == "pos" then
        hrp.CFrame = CFrame.new(location.pos)
    end
end

local function autoWarpLoop()
    while autoWarpEnabled do
        for _, loc in ipairs(locations) do
            if not autoWarpEnabled then break end
            warpTo(loc)
            task.wait(3)
        end
        if autoWarpEnabled and player.Character then
            player.Character:BreakJoints()
            task.wait(5)
        end
    end
end

local function createUI()
    if player.PlayerGui:FindFirstChild("AutoWarpButton") then
        player.PlayerGui.AutoWarpButton:Destroy()
    end

    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "AutoWarpButton"
    ScreenGui.Parent = player:WaitForChild("PlayerGui")
    ScreenGui.ResetOnSpawn = false

    local btn = Instance.new("TextButton")
    btn.Parent = ScreenGui
    btn.Size = UDim2.new(0, 140, 0, 40)
    btn.Position = UDim2.new(0, 20, 0, 20)
    btn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.TextSize = 20
    btn.Font = Enum.Font.SourceSansBold
    btn.Text = "Auto Tps: OFF"

    btn.MouseButton1Click:Connect(function()
        autoWarpEnabled = not autoWarpEnabled
        btn.Text = autoWarpEnabled and "Auto Tps: ON" or "Auto Tps: OFF"

        if autoWarpEnabled then
            task.spawn(autoWarpLoop)
        end
    end)
end

createUI()
