<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>DuckyHub Key System</title>
  <style>
    body { background:#121212; color:#eee; font-family:sans-serif; text-align:center; margin-top:6%; }
    select, button { font-size:18px; padding:10px; margin:10px; border-radius:10px; }
    button { background:#00cc99; border:none; color:#fff; cursor:pointer; }
    #key { margin-top:20px; font-size:20px; color:#00ff99; white-space: pre-wrap; }
    #status { font-size: 16px; margin-top: 10px; min-height: 24px; }
    #langToggle, #refreshBtn {
      position: absolute; top: 10px; font-size: 18px;
      background: transparent; border: none; color: white; cursor: pointer;
    }
    #langToggle { right: 10px; }
    #refreshBtn { left: 10px; }
  </style>
</head>
<body>
  <button id="refreshBtn" onclick="location.reload()">üîÑ</button>
  <button id="langToggle">üåê</button>

  <h1 id="title">üîë ‡∏£‡∏±‡∏ö‡∏Ñ‡∏µ‡∏¢‡πå DuckyHub</h1>
  <select id="duration">
    <option value="1d">‡∏Ñ‡∏µ‡∏¢‡πå 1 ‡∏ß‡∏±‡∏ô</option>
    <option value="3d">‡∏Ñ‡∏µ‡∏¢‡πå 3 ‡∏ß‡∏±‡∏ô</option>
    <option value="7d">‡∏Ñ‡∏µ‡∏¢‡πå 7 ‡∏ß‡∏±‡∏ô</option>
    <option value="premium_trial">Premium Trial (‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ Discord)</option>
    <option value="lifetime">Lifetime Premium (‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ Discord)</option>
  </select><br/>

  <button onclick="getKey()">üì• ‡∏£‡∏±‡∏ö‡∏Ñ‡∏µ‡∏¢‡πå</button>
  <button id="copyBtn">üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ñ‡∏µ‡∏¢‡πå</button>
  <div id="key"></div>
  <div id="status"></div>

<script>
  const keyLinks = {
    "1d": "https://raw.githubusercontent.com/DuckyZ11/DuckyZ11-scripts/refs/heads/main/1day_key",
    "3d": "https://raw.githubusercontent.com/DuckyZ11/DuckyZ11-scripts/refs/heads/main/3day_key",
    "7d": "https://raw.githubusercontent.com/DuckyZ11/DuckyZ11-scripts/refs/heads/main/7day_key"
  };

  const langData = {
    "th": {
      title: "üîë ‡∏£‡∏±‡∏ö‡∏Ñ‡∏µ‡∏¢‡πå DuckyHub",
      btnCopy: "üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ñ‡∏µ‡∏¢‡πå",
      keyResult: k => `üîê ‡∏Ñ‡∏µ‡∏¢‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠:\n${k}`,
      keyUsed: (type, h, m, s) => `‚õî ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡∏µ‡∏¢‡πå‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó "${type}" ‡πÅ‡∏•‡πâ‡∏ß\n‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏≠‡∏≠‡∏µ‡∏Å ${h} ‡∏ä‡∏°. ${m} ‡∏ô‡∏≤‡∏ó‡∏µ ${s} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ`,
      keyExpired: "‚ùå ‡∏Ñ‡∏µ‡∏¢‡πå‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•",
      contact: "dms my discord areayousure",
      copied: "üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ñ‡∏µ‡∏¢‡πå‡πÅ‡∏•‡πâ‡∏ß!",
      selectOptions: {
        "1d": "‡∏Ñ‡∏µ‡∏¢‡πå 1 ‡∏ß‡∏±‡∏ô", "3d": "‡∏Ñ‡∏µ‡∏¢‡πå 3 ‡∏ß‡∏±‡∏ô", "7d": "‡∏Ñ‡∏µ‡∏¢‡πå 7 ‡∏ß‡∏±‡∏ô",
        "premium_trial": "Premium Trial (‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ Discord)",
        "lifetime": "Lifetime Premium (‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ Discord)"
      }
    },
    "en": {
      title: "üîë Get DuckyHub Key",
      btnCopy: "üìã Copy Key",
      keyResult: k => `üîê Your key is:\n${k}`,
      keyUsed: (type, h, m, s) => `‚õî You've already claimed key type "${type}"\nWait ${h}h ${m}m ${s}s to try again`,
      keyExpired: "‚ùå No keys left. Please contact admin.",
      contact: "dms my discord areayousure",
      copied: "üìã Key copied!",
      selectOptions: {
        "1d": "1 Day Key", "3d": "3 Day Key", "7d": "7 Day Key",
        "premium_trial": "Premium Trial (Contact Discord)",
        "lifetime": "Lifetime Premium (Contact Discord)"
      }
    }
  };

  let currentLang = localStorage.getItem("lang") || "th";
  let currentKey = "";
  const keyDiv = document.getElementById("key");
  const copyBtn = document.getElementById("copyBtn");

  function updateLangUI() {
    const t = langData[currentLang];
    document.getElementById("title").innerText = t.title;
    copyBtn.textContent = t.btnCopy;
    const duration = document.getElementById("duration");
    Array.from(duration.options).forEach(opt => {
      if (t.selectOptions[opt.value]) opt.text = t.selectOptions[opt.value];
    });
    localStorage.setItem("lang", currentLang);
  }

  document.getElementById("langToggle").onclick = () => {
    currentLang = currentLang === "th" ? "en" : "th";
    updateLangUI();
    renderSavedKey(); // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏†‡∏≤‡∏©‡∏≤
  };

  updateLangUI();

  function renderSavedKey() {
    const savedKey = localStorage.getItem("saved_key");
    const expire = localStorage.getItem("expire_time");
    const val = localStorage.getItem("used_type");

    if (savedKey && expire && Date.now() < parseInt(expire)) {
      currentKey = savedKey;
      keyDiv.innerText = langData[currentLang].keyResult(savedKey);
      copyBtn.style.display = "inline-block";
    } else {
      currentKey = "";
      keyDiv.innerText = "";
      copyBtn.style.display = "none";
    }
  }

  renderSavedKey();

  function getKey() {
    const val = document.getElementById("duration").value;
    const now = Date.now();
    const t = langData[currentLang];

    if (val === "premium_trial" || val === "lifetime") {
      keyDiv.innerText = t.contact;
      copyBtn.style.display = "none";
      return;
    }

    const prev = localStorage.getItem("used_type");
    const expire = localStorage.getItem("expire_time");

    if (expire && now < parseInt(expire)) {
      const h = Math.floor((expire - now) / 3600000);
      const m = Math.floor(((expire - now) % 3600000) / 60000);
      const s = Math.floor(((expire - now) % 60000) / 1000);
      keyDiv.innerText = t.keyResult(localStorage.getItem("saved_key") || "");
      showStatus(t.keyUsed(prev || val, h, m, s), "#ffcc00");
      return;
    }

    const url = keyLinks[val];
    if (!url) {
      showStatus("Invalid key type", "#ff4444");
      return;
    }

    fetch(url)
      .then(res => {
        if (!res.ok) throw new Error();
        return res.text();
      })
      .then(text => {
        const keys = text.trim().split("\n").map(k => k.trim()).filter(k => k.length > 0);
        const usedKeys = JSON.parse(sessionStorage.getItem(val) || "[]");
        const available = keys.filter(k => !usedKeys.includes(k));

        if (available.length === 0) {
          keyDiv.innerText = t.keyExpired;
          copyBtn.style.display = "none";
          return;
        }

        const randKey = available[Math.floor(Math.random() * available.length)];
        usedKeys.push(randKey);
        sessionStorage.setItem(val, JSON.stringify(usedKeys));
        localStorage.setItem("used_type", val);
        localStorage.setItem("expire_time", (now + (val === "1d" ? 86400000 : val === "3d" ? 259200000 : 604800000)).toString());
        localStorage.setItem("saved_key", randKey);

        keyDiv.innerText = t.keyResult(randKey);
        copyBtn.style.display = "inline-block";
        currentKey = randKey;
      })
      .catch(() => {
        showStatus(t.keyExpired, "#ff4444");
      });
  }

  copyBtn.onclick = () => {
    if (!currentKey) return;
    navigator.clipboard.writeText(currentKey).then(() => {
      alert(langData[currentLang].copied);
    });
  };

  function showStatus(msg, color = "#00cc99", delay = 4000) {
    const div = document.getElementById("status");
    div.innerText = msg;
    div.style.color = color;
    if (delay > 0) {
      setTimeout(() => { div.innerText = ""; }, delay);
    }
  }
</script>
</body>
</html>
