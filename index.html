<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>DuckyHub Key System</title>
  <style>
    body {
      background: #121212;
      color: #eee;
      font-family: sans-serif;
      text-align: center;
      margin-top: 6%;
    }
    select, button {
      font-size: 18px;
      padding: 10px;
      margin: 10px;
      border-radius: 10px;
    }
    button {
      background: #00cc99;
      border: none;
      color: #fff;
      cursor: pointer;
    }
    #key {
      margin-top: 20px;
      font-size: 20px;
      color: #00ff99;
      white-space: pre-wrap;
    }
    #copyBtn {
      display: none;
      background: #444;
      margin-top: 10px;
    }
    #langToggle {
      font-size: 14px;
      margin-top: 20px;
      cursor: pointer;
      background: transparent;
      border: none;
      color: #ccc;
    }
  </style>
</head>
<body>

  <h1>üîë ‡∏£‡∏±‡∏ö‡∏Ñ‡∏µ‡∏¢‡πå DuckyHub</h1>
  <select id="duration">
    <option value="1d">‡∏Ñ‡∏µ‡∏¢‡πå 1 ‡∏ß‡∏±‡∏ô</option>
    <option value="3d">‡∏Ñ‡∏µ‡∏¢‡πå 3 ‡∏ß‡∏±‡∏ô</option>
    <option value="7d">‡∏Ñ‡∏µ‡∏¢‡πå 7 ‡∏ß‡∏±‡∏ô</option>
    <option value="premium_trial">Premium Trial (‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ Discord)</option>
    <option value="lifetime">Lifetime Premium (‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ Discord)</option>
  </select><br/>
  <button onclick="getKey()">üì• ‡∏£‡∏±‡∏ö‡∏Ñ‡∏µ‡∏¢‡πå</button>
  <div id="key"></div>
  <button id="copyBtn">üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ñ‡∏µ‡∏¢‡πå</button><br/>
  <button id="langToggle">üåê Language</button>

  <script>
    const keyLinks = {
      "1d": "https://raw.githubusercontent.com/DuckyZ11/DuckyZ11-scripts/refs/heads/main/1day_key",
      "3d": "https://raw.githubusercontent.com/DuckyZ11/DuckyZ11-scripts/refs/heads/main/3day_key",
      "7d": "https://raw.githubusercontent.com/DuckyZ11/DuckyZ11-scripts/refs/heads/main/7day_key"
    };

    let currentLang = localStorage.getItem("lang") || "th";

    const langData = {
      "th": {
        btnCopy: "üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ñ‡∏µ‡∏¢‡πå",
        keyResult: k => `üîê ‡∏Ñ‡∏µ‡∏¢‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠:\n${k}`,
        keyUsed: (type, h, m, s) => `‚õî ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡∏µ‡∏¢‡πå‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó "${type}" ‡πÅ‡∏•‡πâ‡∏ß\n‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏≠‡∏≠‡∏µ‡∏Å ${h} ‡∏ä‡∏°. ${m} ‡∏ô‡∏≤‡∏ó‡∏µ ${s} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ`,
        keyExpired: "‚ùå ‡∏Ñ‡∏µ‡∏¢‡πå‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•",
        contact: "dms my discord areayousure",
        copied: "üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ñ‡∏µ‡∏¢‡πå‡πÅ‡∏•‡πâ‡∏ß!"
      },
      "en": {
        btnCopy: "üìã Copy Key",
        keyResult: k => `üîê Your key is:\n${k}`,
        keyUsed: (type, h, m, s) => `‚õî You've already claimed key type "${type}"\nWait ${h}h ${m}m ${s}s to try again`,
        keyExpired: "‚ùå No keys left. Please contact admin.",
        contact: "dms my discord areayousure",
        copied: "üìã Key copied!"
      }
    };

    const keyDiv = document.getElementById("key");
    const copyBtn = document.getElementById("copyBtn");

    function updateLangUI() {
      copyBtn.textContent = langData[currentLang].btnCopy;
      localStorage.setItem("lang", currentLang);
    }

    document.getElementById("langToggle").onclick = function() {
      currentLang = currentLang === "th" ? "en" : "th";
      updateLangUI();
    };

    updateLangUI();

    function getKey() {
      const val = document.getElementById("duration").value;
      const t = langData[currentLang];

      if (val === "premium_trial" || val === "lifetime") {
        keyDiv.innerText = t.contact;
        copyBtn.style.display = "none";
        return;
      }

      const prev = localStorage.getItem("used_type");
      const expire = localStorage.getItem("expire_time");
      const now = Date.now();

      if (expire && now < parseInt(expire)) {
        const h = Math.floor((expire - now) / 3600000);
        const m = Math.floor(((expire - now) % 3600000) / 60000);
        const s = Math.floor(((expire - now) % 60000) / 1000);
        keyDiv.innerText = t.keyUsed(prev || val, h, m, s);
        return;
      }

      const url = keyLinks[val];
      if (!url) {
        keyDiv.innerText = "Invalid key type";
        return;
      }

      fetch(url)
        .then(res => {
          if (!res.ok) throw new Error("net");
          return res.text();
        })
        .then(text => {
          const keys = text.trim().split("\n").map(k => k.trim()).filter(k => k.length > 0);
          const usedKeys = JSON.parse(sessionStorage.getItem(val) || "[]");
          const availableKeys = keys.filter(k => !usedKeys.includes(k));

          if (availableKeys.length === 0) {
            keyDiv.innerText = t.keyExpired;
            return;
          }

          const randKey = availableKeys[Math.floor(Math.random() * availableKeys.length)];
          usedKeys.push(randKey);
          sessionStorage.setItem(val, JSON.stringify(usedKeys));

          localStorage.setItem("used_type", val);
          localStorage.setItem("expire_time", (Date.now() + (val === "1d" ? 86400000 : val === "3d" ? 259200000 : 604800000)).toString());
          localStorage.setItem("saved_key", randKey);

          keyDiv.innerText = t.keyResult(randKey);
          copyBtn.style.display = "inline-block";
        })
        .catch(() => {
          keyDiv.innerText = "‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏µ‡∏¢‡πå‡πÑ‡∏î‡πâ";
        });
    }

    // ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏µ‡∏¢‡πå‡πÄ‡∏î‡∏¥‡∏°
    const savedKey = localStorage.getItem("saved_key");
    if (savedKey) {
      keyDiv.innerText = langData[currentLang].keyResult(savedKey);
      copyBtn.style.display = "inline-block";
    }

    copyBtn.onclick = function () {
      const key = localStorage.getItem("saved_key");
      if (key) {
        navigator.clipboard.writeText(key);
        alert(langData[currentLang].copied);
      }
    };
  </script>
</body>
</html>
